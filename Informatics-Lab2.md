# Лабораторная работа 2
## Бай Михаил Олегович | K3141

## Цель задачи

На основе изученного материала лабораторной работы, лекций (2 и 3), дополнительных источников напишите скрипт, который на вход принимает IPv4-адрес в десятичном формате, а на выходе обеспечивает данный IP-адрес в двоичном формате.

Пример входных данных:

```192.168.10.1```

Пример выходныx данных:

```11000000.10101000.00001010.00000001```

## Решение 
Для выполнения поставленной задачи необходимо модифицировать скрипт. Для этого необходимо выполнить следующие действия:

1. **Открытие файла для редактирования**

   Откройте файл `Lab2.bash` в текстовом редакторе:

   ```bash
   gedit Lab2.bash
   ```

2. **Изменение содержимого скрипта**

   Замените текущее содержимое на следующее:

   ```bash 
   #!/bin/bash
   # Функция для преобразования октета в двоичный формат
   decimal_to_binary() {
       printf "%08d" "$(bc <<< "obase=2; $1")"
   }
    
   # Запрос ввода у пользователя
   read -p "Введите IPv4-адрес в десятичном формате: " ip_address
    
   # Проверка корректности ввода
   IFS='.' read -r n1 n2 n3 n4 <<< "$ip_address"
    
   if [[ $n1 -gt 255 || $n2 -gt 255 || $n3 -gt 255 || $n4 -gt 255 ]]; then
       echo "Ошибка: Введите корректный IPv4-адрес в десятичном формате."
       exit 1
   fi
    
   # Преобразование и вывод результата
   binary_ip="$(decimal_to_binary $n1).$(decimal_to_binary $n2).$(decimal_to_binary $n3).$(decimal_to_binary $n4)"
   echo "IPv4-адрес в двоичном формате: $binary_ip"
 
   ```

3. **Сохраните изменения и закройте редактор.**

---

## Объяснение работы скрипта

- `#!/bin/bash` — указание интерпретатора bash для выполнения скрипта.

**Обьявление функции**

- `decimal_to_binary()` - Функция для преобразования десятичного числа в двоичный формат.
- `printf "%08d" "$(bc <<< "obase=2; $1")" ` - Использует команду bc для преобразования числа в двоичную систему и добавляет ведущие нули до 8 символов.
  - `"%08d"` — это форматный спецификатор для форматирования целых чисел.
    - `%` - Начало спецификатора формата.
    - `0` - Указывает на то, что число должно быть дополнено нулями слева, если его длина меньше требуемой.
    - `8` - Желаемая общая длина целого числа в символах. Если число короче 8 символов, перед ним будут добавлены нули.
    - `d` - Означает, что форматируемое значение является целым числом.

**Ввод данных**
- `read -p "Введите IPv4-адрес в десятичном формате: " ip_address` - Строка чтения данных.
  - `read` - Команда используется для считывания ввода.
  - `-p` - Позволяет задать сообщение-подсказку для пользователя, чтобы указать, что именно нужно ввести.
  - `ip_address` - Переменная, сохраняет введённый пользователем IP-адрес.

**Разделение IP адресса на числа**
- `IFS='.' read -r n1 n2 n3 n4 <<< "$ip_address"` - Разделяет введённый IP-адрес, используя символ точки.
  - `IFS='.'` - Указываем, что в качестве разделителя используется точка, что позволяет разбить строку.
  - `read` - Читает разделённые значения и сохраняет их в переменные n1, n2, n3, и n4, представляя собой отдельные числа IP-адреса.
 
**Проверка диапазона значений**
- ` if [[ $o1 -gt 255 || $o2 -gt 255 || $o3 -gt 255 || $o4 -gt 255 ]]; then ` - Проверка, что число не болше 255.
  - `echo "Ошибка: Введите корректный IPv4-адрес в десятичном формате."` - Если хотя бы один октет больше 255, выводится ошибка.
  - `exit 1` - Завершает работу скрипта с кодом ошибки 1

**Вызов функции**
- ` binary_ip="$(decimal_to_binary $o1).$(decimal_to_binary $o2).$(decimal_to_binary $o3).$(decimal_to_binary $o4)"` - Функция decimal_to_binary вызывает для каждого числа, и результаты объединяются в строку в формате binary_ip, где каждый новый набор разделён точкой.

**Вывод результата**
- `echo "IPv4-адрес в двоичном формате: $binary_ip"` - Выводит преобразованный IPv4-адрес в двоичном формате, используя ранее сформированную строку binary_ip.
---

## Проверка работы скрипта

1. **Запуск скрипта с примером из задания**

   ```bash
   bash Lab2.bash
   Введите IPv4-адрес в десятичном формате: 192.168.10.1
   ```

   **Вывод:**

   ```
   IPv4-адрес в двоичном формате: 11000000.10101000.00001010.00000001
   ```

   

2. **Запуск скрипта с нарушением условия**

   ```bash
   bash Lab2.bash
   Введите IPv4-адрес в десятичном формате: 256.168.10.1
   ```

   **Вывод:**

   ```
   Ошибка: Введите корректный IPv4-адрес в десятичном формате.
   ```

## Заключение 
В данной работе было изучены функции, циклы, операции сравнения, работа с вводом и выводом данных. В результате сделанн код, который конвертирует десятичный IPv4 adress в двоичный формат.
