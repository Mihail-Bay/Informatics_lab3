# Лабораторная работа 3
## Бай Михаил Олегович | K3141

## Цель задачи

   Необходимо настроить виртуальную машину А с Ubuntu (желательно, но можно и другую Linux подобную ОС) в VirtualBox. Обеспечить доступ в сеть Интернет. Осуществить проверку этого доступа и приложить скриншот из терминала. Следующим шагом настроить ещё одну виртуальную машину Б. После чего обеспечить сетевой доступ от машины А к машину Б. Приложить скриншот из терминала. Поднять ещё одну виртуальную машину В. Организовать сетевой доступ:

1) из машины А в машину Б,
   
2) из машины А в машину В,

3) но запретить доступ из машины Б в машину В,

4) приложить скриншот, на котором видно терминалы всех трёх машин и видно что между машинами есть (или нет) доступа.


## Решение 
Для выполнения поставленной задачи выполнить следующие действия:

1. **Создание адаптера**

   В левой части окна наведитесь на "Файл" -> "Инструменты" -> "Менеджер сетей".

 ![image](https://github.com/user-attachments/assets/b58173d2-7129-4fe5-9f49-16227afcc5df)

   Далее необходимо создать адаптер. У вас будет два адаптера - один предустановленный и один созданый вами. Оба адаптера необходимо настроить. Перейдите в "DHCP сервер" и поставте галочку "Включить сервер".

![image](https://github.com/user-attachments/assets/b902b70a-ec24-472d-bd7b-1e10b6bffab8)

   

2. **Создание виртуальных машин**

   Необходимо создать 3 виртуальных машины.

![image](https://github.com/user-attachments/assets/0eee81d0-9790-48ef-9cca-6dcae08a2b79)

3. **Настройка виртуальных машин**

   - **настройка машины А**
     
     Зайдите в настройки в пункт "Сеть"

     ![image](https://github.com/user-attachments/assets/866807fe-23d8-4844-9964-9932d5c0ae12)

     1 адаптер настроен на сеть NAT.
     2 адаптер необходимо включить и в пункте "Тип подключения" и выбирете пункт "Виртуальный адаптер". Далее в вкладке "Имя" выбирете первый адаптер.

     ![image](https://github.com/user-attachments/assets/a8f817e7-6c51-41dc-8f2f-7dd734434ca6)

     3 адаптер необходимо включить и в пункте "Тип подключения" и выбирете пункт "Виртуальный адаптер". Далее в вкладке "Имя" выбирете второй адаптер.

     ![image](https://github.com/user-attachments/assets/902f74af-d567-4e77-967e-7b1c262317ce)

---

## Объяснение работы скрипта

- `#!/bin/bash` — указание интерпретатора bash для выполнения скрипта.

**Обьявление функции**

- `decimal_to_binary()` - Функция для преобразования десятичного числа в двоичный формат.
- `printf "%08d" "$(bc <<< "obase=2; $1")" ` - Использует команду bc для преобразования числа в двоичную систему и добавляет ведущие нули до 8 символов.
  - `"%08d"` — это форматный спецификатор для форматирования целых чисел.
    - `%` - Начало спецификатора формата.
    - `0` - Указывает на то, что число должно быть дополнено нулями слева, если его длина меньше требуемой.
    - `8` - Желаемая общая длина целого числа в символах. Если число короче 8 символов, перед ним будут добавлены нули.
    - `d` - Означает, что форматируемое значение является целым числом.

**Ввод данных**
- `read -p "Введите IPv4-адрес в десятичном формате: " ip_address` - Строка чтения данных.
  - `read` - Команда используется для считывания ввода.
  - `-p` - Позволяет задать сообщение-подсказку для пользователя, чтобы указать, что именно нужно ввести.
  - `ip_address` - Переменная, сохраняет введённый пользователем IP-адрес.

**Разделение IP адресса на числа**
- `IFS='.' read -r n1 n2 n3 n4 <<< "$ip_address"` - Разделяет введённый IP-адрес, используя символ точки.
  - `IFS='.'` - Указываем, что в качестве разделителя используется точка, что позволяет разбить строку.
  - `read` - Читает разделённые значения и сохраняет их в переменные n1, n2, n3, и n4, представляя собой отдельные числа IP-адреса.
 
**Проверка диапазона значений**
- ` if [[ $o1 -gt 255 || $o2 -gt 255 || $o3 -gt 255 || $o4 -gt 255 ]]; then ` - Проверка, что число не болше 255.
  - `echo "Ошибка: Введите корректный IPv4-адрес в десятичном формате."` - Если хотя бы один октет больше 255, выводится ошибка.
  - `exit 1` - Завершает работу скрипта с кодом ошибки 1

**Вызов функции**
- ` binary_ip="$(decimal_to_binary $o1).$(decimal_to_binary $o2).$(decimal_to_binary $o3).$(decimal_to_binary $o4)"` - Функция decimal_to_binary вызывает для каждого числа, и результаты объединяются в строку в формате binary_ip, где каждый новый набор разделён точкой.

**Вывод результата**
- `echo "IPv4-адрес в двоичном формате: $binary_ip"` - Выводит преобразованный IPv4-адрес в двоичном формате, используя ранее сформированную строку binary_ip.
---

## Проверка работы скрипта

1. **Запуск скрипта с примером из задания**

   ```bash
   bash Lab2.bash
   Введите IPv4-адрес в десятичном формате: 192.168.10.1
   ```

   **Вывод:**

   ```
   IPv4-адрес в двоичном формате: 11000000.10101000.00001010.00000001
   ```

   

2. **Запуск скрипта с нарушением условия**

   ```bash
   bash Lab2.bash
   Введите IPv4-адрес в десятичном формате: 256.168.10.1
   ```

   **Вывод:**

   ```
   Ошибка: Введите корректный IPv4-адрес в десятичном формате.
   ```

## Заключение 
В данной работе было изучены функции, циклы, операции сравнения, работа с вводом и выводом данных. В результате сделанн код, который конвертирует десятичный IPv4 adress в двоичный формат.
